{"version":3,"file":"resource.js","sourceRoot":"","sources":["../src/resource.ts"],"names":[],"mappings":"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","sourcesContent":["// Project State Management\r\ntype Listener = (items: Resource[]) => void;\r\n\r\nexport class Resource {\r\n  [k: string]: any;\r\n  private name: string;\r\n  private amount: number;\r\n\r\n  constructor(name: string, amount: number) {\r\n    this.name = name;\r\n    this.amount = amount;\r\n  }\r\n  public set updateResourceAmount(amount: number) {\r\n    this.amount += amount;\r\n  }\r\n  public get getResourceName() {\r\n    return this.name;\r\n  }\r\n  public get getResourceAmount() {\r\n    return this.amount;\r\n  }\r\n}\r\nexport class ResourceStorage {\r\n  private listeners: Listener[] = [];\r\n  private resources: Resource[] = [];\r\n  private static instance: ResourceStorage;\r\n\r\n  private constructor() {\r\n    this.addListener(this.uniqByReduce);\r\n  }\r\n\r\n  static getInstance() {\r\n    if (this.instance) {\r\n      return this.instance;\r\n    }\r\n    this.instance = new ResourceStorage();\r\n    return this.instance;\r\n  }\r\n\r\n  addListener(listenerFn: Listener) {\r\n    this.listeners.push(listenerFn);\r\n  }\r\n\r\n  addResource(title: string, amount: number) {\r\n\r\n    //\r\n    const newResource = new Resource(\r\n      title,\r\n      amount\r\n      // ProjectStatus.Active\r\n    );\r\n    \r\n    if (this.resources.push(newResource)) console.log(\"push\");\r\n    for (const listenerFn of this.listeners) {\r\n      (this as any)[listenerFn.name](this.resources.slice());\r\n      console.log(listenerFn);\r\n    }\r\n    return true;\r\n  }\r\n  get getResources() {\r\n    if (this.resources) return this.resources;\r\n    else return \"null\";\r\n  }\r\n  set setResources(array: Resource[]) {\r\n    this.resources = array;\r\n  }\r\n  get getResourcesLength(): number {\r\n    return this.resources.length;\r\n  }\r\n  uniqByReduce(array: Resource[]) {\r\n    this.setResources = array.reduce((acc: Resource[], cur: Resource) => {\r\n      if (!acc.includes(cur)) {\r\n        acc.push(cur);\r\n      } else if (\r\n        acc.slice().filter(function (r) {\r\n          return r.getResourceName === cur.getResourceName;\r\n        }).length > 1) {\r\n          alert(`update given resource: ${cur.getResourceName} with given amount: ${cur.getResourceAmount}`);\r\n          console.log(`update given resource: ${cur.getResourceName} with given amount: ${cur.getResourceAmount}`);\r\n        // checks wether checked resource included in the array and just update it's amount\r\n        const i = acc.findIndex(\r\n          (r) => r.getResourceName === cur.getResourceName\r\n        ); \r\n        if (cur.getResourceAmount >= acc[i].getResourceAmount) {\r\n          // index must be above -1 becuase it was questioned in the last if statement\r\n          acc[i] = acc.pop() as Resource;\r\n        }\r\n        else{\r\n          acc.pop();\r\n          alert(\"Cannot update amount less than actual amount. for that please withdraw the amount that been taken\");\r\n        }\r\n      }\r\n      return acc;\r\n    }, []);\r\n  }\r\n}\r\n\r\n// export declare var data : ResourceStorage;\r\n// data = ResourceStorage.getInstance();\r\n\r\n// const item: Resource = new Resource(\"water\", 100);\r\n// item.updateResourceAmount = 4;\r\n// let p = document.getElementById(\"status\");\r\n// if (p) {\r\n//   p.innerHTML = item.getResourceAmount + item.getResourceName;\r\n// }\r\n// console.log(item.getResourceAmount + item.getResourceName);\r\n"]}