{"version":3,"file":"ProjectInput.js","sourceRoot":"","sources":["../src/ProjectInput.ts"],"names":[],"mappings":"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","sourcesContent":["import { Post } from \"./validators.js\";\r\nimport { ValidationOptions } from \"class-validator\";\r\nimport { Resource, ResourceStorage, Result} from \"./resource.js\";\r\nimport {ProjectOutput} from \"./ProjectOutput.js\"\r\n// autobind decorator\r\nexport function autobind(_: any, _2: string, descriptor: PropertyDescriptor) {\r\n  const originalMethod = descriptor.value;\r\n  const adjDescriptor: PropertyDescriptor = {\r\n    configurable: true,\r\n    get() {\r\n      const boundFn = originalMethod.bind(this);\r\n      return boundFn;\r\n    },\r\n  };\r\n  return adjDescriptor;\r\n}\r\nenum InputType {\r\n  Insert = \"insert\",\r\n  Borrow = \"borrow\",\r\n}\r\n\r\n// ProjectInput Class\r\nexport class ProjectInput<T extends HTMLSelectElement | HTMLInputElement> {\r\n  //   templateElement: HTMLTemplateElement;\r\n  hostElement: HTMLDivElement;\r\n  element: HTMLFormElement;\r\n  nameInputElement: T;\r\n  amountInputElement: HTMLInputElement;\r\n  // peopleInputElement: HTMLInputElement;\r\n\r\n  constructor(\r\n    divElement: string,\r\n    formElement: string,\r\n    nameElement: string,\r\n    amountElement: string\r\n  ) {\r\n    // this.templateElement = document.getElementById(\r\n    //   'project-input'\r\n    // )! as HTMLTemplateElement;\r\n    this.hostElement = document.getElementById(divElement)! as HTMLDivElement;\r\n    // const importedNode = document.importNode(\r\n    //   this.templateElement.content,\r\n    //   true\r\n    // );\r\n    this.element = document.querySelector(`#${formElement}`) as HTMLFormElement;\r\n    //\"#formInsert\"\r\n    // this.element.id = 'user-input';\r\n    if (this.element == null) console.log(\"null element\");\r\n    this.nameInputElement = this.element.querySelector(\r\n      `#${nameElement}`\r\n      //\"#type\"\r\n    ) as T;\r\n    if (this.nameInputElement == null) console.log(\"null element\");\r\n    this.amountInputElement = this.element.querySelector(\r\n      `#${amountElement}`\r\n      // \"#amountInsertion\"\r\n    ) as HTMLInputElement;\r\n    // this.peopleInputElement = this.element.querySelector(\r\n    //   '#people'\r\n    // ) as HTMLInputElement;\r\n\r\n    this.configure();\r\n    // this.attach();\r\n  }\r\n  public gatherUserInput(): [string, number] | void {\r\n    const enteredName = this.nameInputElement.value;\r\n    const enteredAmount = this.amountInputElement.value;\r\n    // const enteredPeople = this.peopleInputElement.value;\r\n\r\n    // if (\r\n    //   enteredName.trim().length === 1 ||\r\n    //   enteredAmount.trim().length === 0\r\n    //   //   ||enteredPeople.trim().length === 0\r\n    // ) {\r\n    //   alert(\"Invalid input, please try again!\");\r\n    //   return;\r\n    // } else }\r\n    return [enteredName, +enteredAmount];\r\n    // }\r\n  }\r\n\r\n  public clearInputs() {\r\n    this.nameInputElement.value = \"\";\r\n    this.amountInputElement.value = \"\";\r\n    // this.peopleInputElement.value = '';\r\n  }\r\n\r\n  @autobind\r\n  public async submitHandler(event: Event) {\r\n    event.preventDefault();\r\n    const userInput = this.gatherUserInput();\r\n    if (Array.isArray(userInput)) {\r\n      let validator = new Post();\r\n      [validator.title, validator.amount] = userInput;\r\n      console.log(validator.title);\r\n      console.log(validator.amount);\r\n      if (await validator.validate()) {\r\n        // first validate the input\r\n        if (this.nameInputElement instanceof HTMLInputElement) {\r\n          console.log(\"input name\")\r\n          // in case of inserting a new resource or existing resource\r\n          if (data.addResource(validator.title.trim(), validator.amount) === Result.Add ) {\r\n            this.addOptionBorrow(validator.title); // adds option to the borrow select options\r\n          }\r\n        } else {\r\n          // in case of borrowing a resource\r\n          console.log(\"select input\")\r\n          data.UpdateExistingItemOrBorrowItem = new Resource(\r\n            validator.title.trim(),\r\n            -Math.abs(validator.amount)\r\n            // makes negative to reduce resource amount\r\n          );\r\n          console.log(\"borrow resource\");\r\n\r\n          this.amountHandler();\r\n          //remove empty resources\r\n        }\r\n      }\r\n      this.clearInputs();\r\n      console.log(data.getResources);\r\n    } else {\r\n      console.log(userInput);\r\n    }\r\n  }\r\n\r\n  public configure() {\r\n    this.element.addEventListener(\"submit\", this.submitHandler);\r\n  }\r\n\r\n  //   private attach() {\r\n  //     this.hostElement.insertAdjacentElement('afterbegin', this.element);\r\n  //   }\r\n  public addOptionBorrow(title: string) {\r\n    // a function for first form for adding a new item to select list of the second form\r\n\r\n    let select = document.getElementById(\"list\")!;\r\n    let newOption = document.createElement(\"option\");\r\n    newOption.value = title;\r\n    newOption.id = title;\r\n    newOption.innerHTML = title;\r\n    select.appendChild(newOption);\r\n  }\r\n\r\n  public amountHandler() {\r\n    // a function to remove empty resurces from borrow select list\r\n    let select = document.getElementById(\"list\")!;\r\n    if (data.getResources) {\r\n      data.getResources.forEach((r) => {\r\n        let node = document.getElementById(r.getResourceName)!;\r\n        if (r.getResourceAmount === 0) {\r\n          select.removeChild(node);\r\n          // remove the option of empty resource from options list\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n// export declare var data : ResourceStorage;\r\nexport const data = ResourceStorage.getInstance();\r\ntry {\r\n  const prjInputInsert = new ProjectInput<HTMLInputElement>(\r\n    \"status\",\r\n    \"formInsert\",\r\n    \"type\",\r\n    \"amountInsertion\"\r\n  );\r\n  const prjInputBorrow = new ProjectInput<HTMLSelectElement>(\r\n    \"status\",\r\n    \"formBorrow\",\r\n    \"list\",\r\n    \"amountBorrow\"\r\n  );\r\n  const prjOutput = new ProjectOutput();\r\n} catch (e) {\r\n  console.log(\"no favicon\");\r\n  console.log(e);\r\n}\r\n"]}